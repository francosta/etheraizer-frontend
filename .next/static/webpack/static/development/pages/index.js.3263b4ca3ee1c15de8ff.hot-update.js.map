{"version":3,"file":"static/webpack/static/development/pages/index.js.3263b4ca3ee1c15de8ff.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport factory from \"../ethereum/factoryContract\";\nimport Layout from \"../components/layouts\";\nimport web3 from \"../ethereum/web3\";\nimport { Card } from \"semantic-ui-react\";\nimport { Link } from \"../routes\";\nimport Router from \"next/router\";\nimport { getUserData, login, validate } from \"../services/authentication\";\n\nexport default class projectIndex extends Component {\n  static async getInitialProps() {\n    const projects = await factory.methods.getDeployedCampaigns().call();\n    return { projects };\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userData: {}\n    };\n  }\n\n  componentDidMount() {\n    if (\n      localStorage.getItem(\"token\") &&\n      localStorage.getItem(\"token\") !== \"undefined\"\n    ) {\n      validate()\n        .then(resp => {\n          debugger;\n          this.login(resp.token);\n          this.getData(resp.token, resp.username);\n        })\n        .catch(err => {\n          alert(err);\n        });\n    } else {\n      Router.push(\"/login\");\n    }\n  }\n\n  login = token => {\n    localStorage.setItem(\"token\", token);\n    getUserData().then(data => {\n      this.setState({ userData: data });\n    });\n    Router.push(\"/\");\n  };\n\n  logout = () => {\n    this.setState({\n      userData: {\n        email: \"\",\n        name: \"\",\n        portfolios: [],\n        profile_picture: \"\"\n      }\n    });\n    localStorage.removeItem(\"token\");\n  };\n\n  setUser = user => {\n    this.setState({ userData: user });\n  };\n\n  render() {\n    if (this.state.userData === {}) {\n      return <Login login={this.login} />;\n    } else {\n      return (\n        <Layout>\n          <h2>This will be the homepage</h2>\n        </Layout>\n      );\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;;AADA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA4BA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAlCA;AAoCA;AACA;AACA;AACA;AACA;AACA;AAJA;AADA;AACA;AAOA;AACA;AACA;AA9CA;AAgDA;AAAA;AAAA;AACA;AACA;AA/CA;AACA;AADA;AAHA;AAMA;AACA;;;AACA;AAAA;AACA;AAAA;AAIA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AA0BA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAKA;AACA;;;;AAnEA;AACA;;;;;A","sourceRoot":""}